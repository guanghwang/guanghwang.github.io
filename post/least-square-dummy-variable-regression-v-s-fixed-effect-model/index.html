<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.33" />
  <meta name="author" content="Guanghua Wang">
  <meta name="description" content="Ph.D Candidate in Economcis">

  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="/css/highlight.min.css">
    
  
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/academicons.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700|Merriweather|Roboto+Mono">
  <link rel="stylesheet" href="/css/hugo-academic.css">
  

  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="Guanghua">
  <link rel="feed" href="/index.xml" type="application/rss+xml" title="Guanghua">

  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/apple-touch-icon.png">

  <link rel="canonical" href="/post/least-square-dummy-variable-regression-v-s-fixed-effect-model/">

  

  <title>Least Square Dummy Variable Regression V.S. Fixed Effect Model | Guanghua</title>

</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71">

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Guanghua</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        

        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#posts">
            
            <span>Posts</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
          </a>
        </li>

        
        
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  

  <div class="article-container">
    <h1 itemprop="name">Least Square Dummy Variable Regression V.S. Fixed Effect Model</h1>
    

<div class="article-metadata">

  <span class="article-date">
    <time datetime="2017-07-09 00:00:00 &#43;0000 UTC" itemprop="datePublished">
      Sun, Jul 9, 2017
    </time>
  </span>

  
  
  
  <span class="article-categories">
    <i class="fa fa-folder"></i>
    
    <a href="/categories/r-learning-notes">R Learning Notes</a
    >
    
  </span>
  
  

  
  
  
  <span class="article-tags">
    <i class="fa fa-tags"></i>
    
    <a href="/tags/r-regression">R regression</a
    >
    
  </span>
  
  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=%2fpost%2fleast-square-dummy-variable-regression-v-s-fixed-effect-model%2f"
         target="_blank">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=Least%20Square%20Dummy%20Variable%20Regression%20V.S.%20Fixed%20Effect%20Model&amp;url=%2fpost%2fleast-square-dummy-variable-regression-v-s-fixed-effect-model%2f"
         target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fpost%2fleast-square-dummy-variable-regression-v-s-fixed-effect-model%2f&amp;title=Least%20Square%20Dummy%20Variable%20Regression%20V.S.%20Fixed%20Effect%20Model"
         target="_blank">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=%2fpost%2fleast-square-dummy-variable-regression-v-s-fixed-effect-model%2f&amp;title=Least%20Square%20Dummy%20Variable%20Regression%20V.S.%20Fixed%20Effect%20Model"
         target="_blank">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=Least%20Square%20Dummy%20Variable%20Regression%20V.S.%20Fixed%20Effect%20Model&amp;body=%2fpost%2fleast-square-dummy-variable-regression-v-s-fixed-effect-model%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>

    <div class="article-style" itemprop="articleBody">
      <p>In the panle regression setup, the coefficients in the Least Square Dummy Variable model is identical to that in the Fixed Effect Model. However, the computing time needed is much less in the Fixed Effect Model than the time in the Least Square Dummy Variable Model.</p>
<pre class="r"><code>if (!require(plm)) install.packages(&quot;plm&quot;)</code></pre>
<pre><code>## Loading required package: plm</code></pre>
<pre><code>## Loading required package: Formula</code></pre>
<pre class="r"><code>library(plm)
if (!require(broom)) install.packages(&quot;broom&quot;)</code></pre>
<pre><code>## Loading required package: broom</code></pre>
<pre class="r"><code>library(broom)
data(package = &quot;plm&quot;)
library(dplyr)</code></pre>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:plm&#39;:
## 
##     between, lag, lead</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<div id="data-desciption" class="section level2">
<h2>Data Desciption</h2>
<p>I use <code>Males</code> dataset as an example.</p>
<pre class="r"><code>data(Males, package = &quot;plm&quot;)
summary(Males)</code></pre>
<pre><code>##        nr             year          school          exper       
##  Min.   :   13   Min.   :1980   Min.   : 3.00   Min.   : 0.000  
##  1st Qu.: 2329   1st Qu.:1982   1st Qu.:11.00   1st Qu.: 4.000  
##  Median : 4569   Median :1984   Median :12.00   Median : 6.000  
##  Mean   : 5262   Mean   :1984   Mean   :11.77   Mean   : 6.515  
##  3rd Qu.: 8406   3rd Qu.:1985   3rd Qu.:12.00   3rd Qu.: 9.000  
##  Max.   :12548   Max.   :1987   Max.   :16.00   Max.   :18.000  
##                                                                 
##  union         ethn      married    health          wage       
##  no :3296   other:3176   no :2446   no :4286   Min.   :-3.579  
##  yes:1064   black: 504   yes:1914   yes:  74   1st Qu.: 1.351  
##             hisp : 680                         Median : 1.671  
##                                                Mean   : 1.649  
##                                                3rd Qu.: 1.991  
##                                                Max.   : 4.052  
##                                                                
##                              industry   
##  Manufacturing                   :1231  
##  Trade                           :1169  
##  Professional_and_Related Service: 333  
##  Business_and_Repair_Service     : 331  
##  Construction                    : 327  
##  Transportation                  : 286  
##  (Other)                         : 683  
##                                occupation            residence   
##  Craftsmen, Foremen_and_kindred     :934   rural_area     :  85  
##  Operatives_and_kindred             :881   north_east     : 733  
##  Service_Workers                    :509   nothern_central: 964  
##  Clerical_and_kindred               :486   south          :1333  
##  Professional, Technical_and_kindred:453   NA&#39;s           :1245  
##  Laborers_and_farmers               :401                         
##  (Other)                            :696</code></pre>
<pre class="r"><code>class(Males)</code></pre>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>In the <code>Males</code> dataset, <code>nr</code> represents the respondents id, and <code>year</code> is the survey year. This dataset is a panel data set.</p>
</div>
<div id="lsdv" class="section level2">
<h2>LSDV</h2>
<p>In the following comparison, I study the relationship between experience and wage. <span class="math inline">\(\log(wage) = \alpha + \beta exp + \gamma exp^2 + \theta Controls\)</span> where the controls include <code>union</code>, <code>ethnicity(ethn)</code>, <code>health</code> and <code>married</code>.</p>
<pre class="r"><code>t &lt;- proc.time()
lsdv &lt;- lm(
  log(wage) ~ exper + I(exper^2) + I(as.integer(union)) + ethn + health + married + factor(nr),
  data = Males,
  subset = wage &gt;= 1
)</code></pre>
<pre><code>## Warning in log(wage): NaNs produced</code></pre>
<pre class="r"><code>lsdv.time &lt;- proc.time() - t
print(lsdv.time)</code></pre>
<pre><code>##    user  system elapsed 
##   1.299   0.008   1.307</code></pre>
<pre class="r"><code>lsdv.result &lt;- tidy(lsdv)
dim(lsdv.result)</code></pre>
<pre><code>## [1] 549   5</code></pre>
<p>In the LSDV model, the final result includes a set of individual dummies.</p>
<pre class="r"><code>knitr::kable(head(lsdv.result, 9))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">0.2077293</td>
<td align="right">0.0527951</td>
<td align="right">3.9346308</td>
<td align="right">0.0000850</td>
</tr>
<tr class="even">
<td align="left">exper</td>
<td align="right">0.0500831</td>
<td align="right">0.0034919</td>
<td align="right">14.3425289</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="left">I(exper^2)</td>
<td align="right">-0.0017047</td>
<td align="right">0.0002482</td>
<td align="right">-6.8679477</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">I(as.integer(union))</td>
<td align="right">0.0379404</td>
<td align="right">0.0078563</td>
<td align="right">4.8292689</td>
<td align="right">0.0000014</td>
</tr>
<tr class="odd">
<td align="left">ethnblack</td>
<td align="right">0.2615435</td>
<td align="right">0.0703569</td>
<td align="right">3.7173801</td>
<td align="right">0.0002045</td>
</tr>
<tr class="even">
<td align="left">ethnhisp</td>
<td align="right">0.1712365</td>
<td align="right">0.0704787</td>
<td align="right">2.4296203</td>
<td align="right">0.0151653</td>
</tr>
<tr class="odd">
<td align="left">healthyes</td>
<td align="right">0.0049806</td>
<td align="right">0.0195340</td>
<td align="right">0.2549727</td>
<td align="right">0.7987594</td>
</tr>
<tr class="even">
<td align="left">marriedyes</td>
<td align="right">0.0134629</td>
<td align="right">0.0073480</td>
<td align="right">1.8321787</td>
<td align="right">0.0670109</td>
</tr>
<tr class="odd">
<td align="left">factor(nr)17</td>
<td align="right">-0.0246613</td>
<td align="right">0.0701815</td>
<td align="right">-0.3513930</td>
<td align="right">0.7253150</td>
</tr>
</tbody>
</table>
<pre class="r"><code>lsdv.residual_square &lt;- sum((lsdv$residuals)^2)
glance(lsdv)</code></pre>
<pre><code>##   r.squared adj.r.squared     sigma statistic p.value  df   logLik
## 1 0.7123676     0.6666931 0.1353907  15.59663       0 549 2617.868
##         AIC       BIC deviance df.residual
## 1 -4135.736 -674.0087 63.25907        3451</code></pre>
</div>
<div id="fixed-effect-model" class="section level2">
<h2>Fixed Effect Model</h2>
<pre class="r"><code>Males.panel &lt;- plm.data(Males, indexes = c(&quot;nr&quot;, &quot;year&quot;))</code></pre>
<pre><code>## Warning: use of &#39;plm.data&#39; is discouraged, better use &#39;pdata.frame&#39; instead</code></pre>
<pre class="r"><code>t &lt;- proc.time()
fixed_effect &lt;- plm(
  log(wage) ~ exper + I(exper^2) + I(as.integer(union)) + ethn + health + married,
  data = Males.panel,
  subset = wage &gt;= 1,
  effect = &quot;individual&quot;,
  model = &quot;within&quot;
)</code></pre>
<pre><code>## Warning in log(wage): NaNs produced</code></pre>
<pre class="r"><code>fixed_effect.time &lt;- proc.time() - t
print(fixed_effect.time)</code></pre>
<pre><code>##    user  system elapsed 
##   0.277   0.008   0.286</code></pre>
<pre class="r"><code>fixed_effect.result &lt;- tidy(fixed_effect)
dim(fixed_effect.result)</code></pre>
<pre><code>## [1] 5 5</code></pre>
<p>In the fixed effect model, we only have 5 coefficients because the time-invariant variable(<code>ethn</code>) is cancalled out in the regression.</p>
<pre class="r"><code>knitr::kable(fixed_effect.result)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">exper</td>
<td align="right">0.0500831</td>
<td align="right">0.0034919</td>
<td align="right">14.3425289</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">I(exper^2)</td>
<td align="right">-0.0017047</td>
<td align="right">0.0002482</td>
<td align="right">-6.8679477</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="left">I(as.integer(union))</td>
<td align="right">0.0379404</td>
<td align="right">0.0078563</td>
<td align="right">4.8292689</td>
<td align="right">0.0000014</td>
</tr>
<tr class="even">
<td align="left">healthyes</td>
<td align="right">0.0049806</td>
<td align="right">0.0195340</td>
<td align="right">0.2549727</td>
<td align="right">0.7987594</td>
</tr>
<tr class="odd">
<td align="left">marriedyes</td>
<td align="right">0.0134629</td>
<td align="right">0.0073480</td>
<td align="right">1.8321787</td>
<td align="right">0.0670109</td>
</tr>
</tbody>
</table>
<pre class="r"><code>fixed_effect.residual_square &lt;- sum((fixed_effect$residuals)^2)
glance(fixed_effect)</code></pre>
<pre><code>##   r.squared adj.r.squared statistic       p.value deviance df.residual
## 1 0.2186536    0.09458001   193.147 6.996476e-182 63.25907        3451</code></pre>
</div>
<div id="comparison" class="section level2">
<h2>Comparison</h2>
<pre class="r"><code>knitr::kable(fixed_effect.result[,1:3] %&gt;% left_join(lsdv.result[,1:3], by = &quot;term&quot;, suffix = c(&quot;.fixed&quot;, &quot;.lsdv&quot;)))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate.fixed</th>
<th align="right">std.error.fixed</th>
<th align="right">estimate.lsdv</th>
<th align="right">std.error.lsdv</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">exper</td>
<td align="right">0.0500831</td>
<td align="right">0.0034919</td>
<td align="right">0.0500831</td>
<td align="right">0.0034919</td>
</tr>
<tr class="even">
<td align="left">I(exper^2)</td>
<td align="right">-0.0017047</td>
<td align="right">0.0002482</td>
<td align="right">-0.0017047</td>
<td align="right">0.0002482</td>
</tr>
<tr class="odd">
<td align="left">I(as.integer(union))</td>
<td align="right">0.0379404</td>
<td align="right">0.0078563</td>
<td align="right">0.0379404</td>
<td align="right">0.0078563</td>
</tr>
<tr class="even">
<td align="left">healthyes</td>
<td align="right">0.0049806</td>
<td align="right">0.0195340</td>
<td align="right">0.0049806</td>
<td align="right">0.0195340</td>
</tr>
<tr class="odd">
<td align="left">marriedyes</td>
<td align="right">0.0134629</td>
<td align="right">0.0073480</td>
<td align="right">0.0134629</td>
<td align="right">0.0073480</td>
</tr>
</tbody>
</table>
<p>The results of continuous variables are (almost) numerically identical. <code>plm</code> ajust the se by defult.</p>
<pre class="r"><code>fixed_effect.residual_square - lsdv.residual_square</code></pre>
<pre><code>## [1] 7.105427e-15</code></pre>
<p>The sum of residual squares are identical too.</p>
<pre class="r"><code>print(lsdv.time)</code></pre>
<pre><code>##    user  system elapsed 
##   1.299   0.008   1.307</code></pre>
<pre class="r"><code>print(fixed_effect.time)</code></pre>
<pre><code>##    user  system elapsed 
##   0.277   0.008   0.286</code></pre>
<pre class="r"><code>lsdv.time - fixed_effect.time</code></pre>
<pre><code>##         user       system      elapsed 
## 1.022000e+00 6.938894e-18 1.021000e+00</code></pre>
<pre class="r"><code>lsdv.time[3] / fixed_effect.time[3]</code></pre>
<pre><code>## elapsed 
## 4.56993</code></pre>
<p>In this example, fixed effect model is 13 times faster than LSDV. Notice the individuals in my sample is 545. As individuals increases, the computing time increase dramatically. (The (X + D) matrix increases accordingly).</p>
</div>

    </div>
  </div>

</article>

<div class="container">
  <nav>
  <ul class="pager">
    
    <li class="previous"><a href="/post/quick-subset-data-table/"><span
      aria-hidden="true">&larr;</span> Quick Subset Using data.table</a></li>
    

    
    <li class="next"><a href="/post/notes-on-the-constant-term-in-the-fixed-effect-model/">Notes on the Constant Term in the Fixed Effect Model <span
      aria-hidden="true">&rarr;</span></a></li>
    
  </ul>
</nav>

</div>

<div class="article-container">
  
<section id="comments">
  <div id="disqus_thread">
    <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "blog-pkpqgdhgtu" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</section>


</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2017 Guanghua Wang &middot; 

      Powered by the <a href="https://github.com/gcushen/hugo-academic" target="_blank">Academic
      theme</a> for <a href="http://gohugo.io" target="_blank">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.4/TweenMax.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/ScrollToPlugin.min.js"></script>
    <script src="/js/jquery-1.12.3.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/isotope.pkgd.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.1/imagesloaded.pkgd.min.js"></script>
    <script src="/js/hugo-academic.js"></script>
    

    

    
    
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
    </script>
    <script async src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML"></script>
    

  </body>
</html>

